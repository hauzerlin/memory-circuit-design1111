%%1v

clc
clear


v1_1 = [        % v2從0掃到1
999.7488*0.001
999.6893*0.001
999.6121*0.001
999.5120*0.001
999.3823*0.001
999.2147*0.001
998.9986*0.001
998.7206*0.001
998.3638*0.001
997.9069*0.001
997.3236*0.001
996.5811*0.001
995.6388*0.001
994.4470*0.001
992.9453*0.001
991.0601*0.001
988.7032*0.001
985.7694*0.001
982.1335*0.001
977.6485*0.001
972.1427*0.001
965.4164*0.001
957.2392*0.001
947.3460*0.001
935.4299*0.001
921.1400*0.001
904.0607*0.001
883.6945*0.001
859.4248*0.001
830.4544*0.001
795.7125*0.001
753.8184*0.001
704.0023*0.001
651.3298*0.001
608.3929*0.001
578.2218*0.001
556.0562*0.001
538.3495*0.001
523.2513*0.001
509.7762*0.001
497.3584*0.001
485.6543*0.001
474.4376*0.001
463.5571*0.001
452.9078*0.001
442.4151*0.001
432.0259*0.001
421.7021*0.001
411.4173*0.001
401.1534*0.001
390.8994*0.001
380.6494*0.001
370.4017*0.001
360.1585*0.001
349.9247*0.001
339.7078*0.001
329.5180*0.001
319.3676*0.001
309.2712*0.001
299.2462*0.001
289.3130*0.001
279.4956*0.001
269.8222*0.001
260.3264*0.001
251.0478*0.001
242.0326*0.001
233.3335*0.001
225.0079*0.001
217.1142*0.001
209.7058*0.001
202.8240*0.001
196.4908*0.001
190.7065*0.001
185.4511*0.001
180.6890*0.001
176.3760*0.001
172.4652*0.001
168.9103*0.001
165.6689*0.001
162.7032*0.001
159.9800*0.001
157.4706*0.001
155.1505*0.001
152.9984*0.001
150.9963*0.001
149.1283*0.001
147.3810*0.001
145.7426*0.001
144.2030*0.001
142.7530*0.001
141.3849*0.001
140.0917*0.001
138.8672*0.001
137.7060*0.001
136.6032*0.001
135.5544*0.001
134.5556*0.001
133.6034*0.001
132.6944*0.001
131.8259*0.001
130.9951*0.001
];
v2_1 =[    0           
   10.00000*0.001
   20.00000*0.001
   30.00000*0.001
   40.00000*0.001
   50.00000*0.001
   60.00000*0.001
   70.00000*0.001
   80.00000*0.001
   90.00000*0.001
  100.00000*0.001
  110.00000*0.001
  120.00000*0.001
  130.00000*0.001
  140.00000*0.001
  150.00000*0.001
  160.00000*0.001
  170.00000*0.001
  180.00000*0.001
  190.00000*0.001
  200.00000*0.001
  210.00000*0.001
  220.00000*0.001
  230.00000*0.001
  240.00000*0.001
  250.00000*0.001
  260.00000*0.001
  270.00000*0.001
  280.00000*0.001
  290.00000*0.001
  300.00000*0.001
  310.00000*0.001
  320.00000*0.001
  330.00000*0.001
  340.00000*0.001
  350.00000*0.001
  360.00000*0.001
  370.00000*0.001
  380.00000*0.001
  390.00000*0.001
  400.00000*0.001
  410.00000*0.001
  420.00000*0.001
  430.00000*0.001
  440.00000*0.001
  450.00000*0.001
  460.00000*0.001
  470.00000*0.001
  480.00000*0.001
  490.00000*0.001
  500.00000*0.001
  510.00000*0.001
  520.00000*0.001
  530.00000*0.001
  540.00000*0.001
  550.00000*0.001
  560.00000*0.001
  570.00000*0.001
  580.00000*0.001
  590.00000*0.001
  600.00000*0.001
  610.00000*0.001
  620.00000*0.001
  630.00000*0.001
  640.00000*0.001
  650.00000*0.001
  660.00000*0.001
  670.00000*0.001
  680.00000*0.001
  690.00000*0.001
  700.00000*0.001
  710.00000*0.001
  720.00000*0.001
  730.00000*0.001
  740.00000*0.001
  750.00000*0.001
  760.00000*0.001
  770.00000*0.001
  780.00000*0.001
  790.00000*0.001
  800.00000*0.001
  810.00000*0.001
  820.00000*0.001
  830.00000*0.001
  840.00000*0.001
  850.00000*0.001
  860.00000*0.001
  870.00000*0.001
  880.00000*0.001
  890.00000*0.001
  900.00000*0.001
  910.00000*0.001
  920.00000*0.001
  930.00000*0.001
  940.00000*0.001
  950.00000*0.001
  960.00000*0.001
  970.00000*0.001
  980.00000*0.001
  990.00000*0.001
    1.00000      
];

v1_2 = v2_1; %v1從0掃到1
v2_2 = v1_1; % 從1掉到0

x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

plot_squar2(x1,y1,x2,y2);





%% 0.8v

clc
clear


v1_1 = [        % v2從0掃到1
799.8421*0.001
799.7988*0.001
799.7419*0.001
799.6673*0.001
799.5695*0.001
799.4415*0.001
799.2740*0.001
799.0551*0.001
798.7693*0.001
798.3966*0.001
797.9114*0.001
797.2804*0.001
796.4613*0.001
795.4000*0.001
794.0272*0.001
792.2552*0.001
789.9725*0.001
787.0377*0.001
783.2718*0.001
778.4477*0.001
772.2758*0.001
764.3823*0.001
754.2836*0.001
741.3282*0.001
724.6100*0.001
702.7891*0.001
673.7253*0.001
633.9502*0.001
580.6767*0.001
521.0351*0.001
471.8137*0.001
439.1510*0.001
416.6711*0.001
399.5250*0.001
385.3724*0.001
373.0392*0.001
361.8786*0.001
351.4977*0.001
341.6482*0.001
332.1608*0.001
322.9192*0.001
313.8407*0.001
304.8655*0.001
295.9506*0.001
287.0650*0.001
278.1876*0.001
269.3044*0.001
260.4082*0.001
251.4973*0.001
242.5753*0.001
233.6510*0.001
224.7389*0.001
215.8597*0.001
207.0412*0.001
198.3202*0.001
189.7441*0.001
181.3723*0.001
173.2762*0.001
165.5373*0.001
158.2395*0.001
151.4565*0.001
145.2390*0.001
139.6047*0.001
134.5394*0.001
130.0040*0.001
125.9467*0.001
122.3116*0.001
119.0454*0.001
116.0998*0.001
113.4328*0.001
111.0082*0.001
108.7954*0.001
106.7683*0.001
104.9048*0.001
103.1860*0.001
101.5960*0.001
100.1207*0.001
 98.7483*0.001
 97.4685*0.001
 96.2722*0.001
 95.1515*0.001

];
v2_1 =[    0      
 10.0000*0.001
 20.0000*0.001
 30.0000*0.001
 40.0000*0.001
 50.0000*0.001
 60.0000*0.001
 70.0000*0.001
 80.0000*0.001
 90.0000*0.001
100.0000*0.001
110.0000*0.001
120.0000*0.001
130.0000*0.001
140.0000*0.001
150.0000*0.001
160.0000*0.001
170.0000*0.001
180.0000*0.001
190.0000*0.001
200.0000*0.001
210.0000*0.001
220.0000*0.001
230.0000*0.001
240.0000*0.001
250.0000*0.001
260.0000*0.001
270.0000*0.001
280.0000*0.001
290.0000*0.001
300.0000*0.001
310.0000*0.001
320.0000*0.001
330.0000*0.001
340.0000*0.001
350.0000*0.001
360.0000*0.001
370.0000*0.001
380.0000*0.001
390.0000*0.001
400.0000*0.001
410.0000*0.001
420.0000*0.001
430.0000*0.001
440.0000*0.001
450.0000*0.001
460.0000*0.001
470.0000*0.001
480.0000*0.001
490.0000*0.001
500.0000*0.001
510.0000*0.001
520.0000*0.001
530.0000*0.001
540.0000*0.001
550.0000*0.001
560.0000*0.001
570.0000*0.001
580.0000*0.001
590.0000*0.001
600.0000*0.001
610.0000*0.001
620.0000*0.001
630.0000*0.001
640.0000*0.001
650.0000*0.001
660.0000*0.001
670.0000*0.001
680.0000*0.001
690.0000*0.001
700.0000*0.001
710.0000*0.001
720.0000*0.001
730.0000*0.001
740.0000*0.001
750.0000*0.001
760.0000*0.001
770.0000*0.001
780.0000*0.001
790.0000*0.001
800.0000*0.001
  
];

v1_2 = v2_1; %v1從0掃到1
v2_2 = v1_1; % 從1掉到0


x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

plot_squar2(x1,y1,x2,y2);


%% 0.6v

clc
clear


v1_1 = [        % v2從0掃到1
599.8694*0.001 
 599.8270*0.001
 599.7698*0.001
 599.6923*0.001
 599.5874*0.001
 599.4449*0.001
 599.2510*0.001
 598.9865*0.001
 598.6250*0.001
 598.1296*0.001
 597.4487*0.001
 596.5101*0.001
 595.2116*0.001
 593.4082*0.001
 590.8909*0.001
 587.3543*0.001
 582.3380*0.001
 575.1275*0.001
 564.5175*0.001
 548.2203*0.001
 521.0404*0.001
 473.5282*0.001
 411.6607*0.001
 357.0527*0.001
 321.9486*0.001
 299.7804*0.001
 283.9174*0.001
 271.3536*0.001
 260.6908*0.001
 251.1954*0.001
 242.4432*0.001
 234.1744*0.001
 226.2221*0.001
 218.4720*0.001
 210.8463*0.001
 203.2930*0.001
 195.7777*0.001
 188.2732*0.001
 180.7609*0.001
 173.2291*0.001
 165.6721*0.001
 158.0904*0.001
 150.4907*0.001
 142.8879*0.001
 135.3065*0.001
 127.7848*0.001
 120.3777*0.001
 113.1608*0.001
 106.2299*0.001
  99.6916*0.001
  93.6449*0.001
  88.1571*0.001
  83.2499*0.001
  78.9036*0.001
  75.0709*0.001
  71.6937*0.001
  68.7126*0.001
  66.0734*0.001
  63.7282*0.001
  61.6359*0.001
  59.7617*0.001


];
v2_1 =[    0 
 10.0000*0.001
 20.0000*0.001
 30.0000*0.001
 40.0000*0.001
 50.0000*0.001
 60.0000*0.001
 70.0000*0.001
 80.0000*0.001
 90.0000*0.001
100.0000*0.001
110.0000*0.001
120.0000*0.001
130.0000*0.001
140.0000*0.001
150.0000*0.001
160.0000*0.001
170.0000*0.001
180.0000*0.001
190.0000*0.001
200.0000*0.001
210.0000*0.001
220.0000*0.001
230.0000*0.001
240.0000*0.001
250.0000*0.001
260.0000*0.001
270.0000*0.001
280.0000*0.001
290.0000*0.001
300.0000*0.001
310.0000*0.001
320.0000*0.001
330.0000*0.001
340.0000*0.001
350.0000*0.001
360.0000*0.001
370.0000*0.001
380.0000*0.001
390.0000*0.001
400.0000*0.001
410.0000*0.001
420.0000*0.001
430.0000*0.001
440.0000*0.001
450.0000*0.001
460.0000*0.001
470.0000*0.001
480.0000*0.001
490.0000*0.001
500.0000*0.001
510.0000*0.001
520.0000*0.001
530.0000*0.001
540.0000*0.001
550.0000*0.001
560.0000*0.001
570.0000*0.001
580.0000*0.001
590.0000*0.001
600.0000*0.001

  
];

v1_2 = v2_1; %v1從0掃到1
v2_2 = v1_1; % 從1掉到0


x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

plot_squar2(x1,y1,x2,y2);


%% 0.4v

clc
clear


v1_1 = [        % v2從0掃到1
399.7267*0.001
399.6018*0.001
399.4155*0.001
399.1354*0.001
398.7115*0.001
398.0648*0.001
397.0702*0.001
395.5252*0.001
393.0923*0.001
389.1908*0.001
382.7267*0.001
371.2969*0.001
347.9480*0.001
300.0828*0.001
250.0049*0.001
218.7121*0.001
199.4765*0.001
185.8425*0.001
175.0244*0.001
165.7599*0.001
157.4075*0.001
149.6116*0.001
142.1632*0.001
134.9361*0.001
127.8511*0.001
120.8597*0.001
113.9324*0.001
107.0530*0.001
100.2145*0.001
 93.4179*0.001
 86.6719*0.001
 79.9942*0.001
 73.4136*0.001
 66.9743*0.001
 60.7388*0.001
 54.7890*0.001
 49.2159*0.001
 44.0994*0.001
 39.4915*0.001
 35.4068*0.001
 31.8272*0.001

];
v2_1 =[    0 
  10.0000*0.001
 20.0000*0.001
 30.0000*0.001
 40.0000*0.001
 50.0000*0.001
 60.0000*0.001
 70.0000*0.001
 80.0000*0.001
 90.0000*0.001
100.0000*0.001
110.0000*0.001
120.0000*0.001
130.0000*0.001
140.0000*0.001
150.0000*0.001
160.0000*0.001
170.0000*0.001
180.0000*0.001
190.0000*0.001
200.0000*0.001
210.0000*0.001
220.0000*0.001
230.0000*0.001
240.0000*0.001
250.0000*0.001
260.0000*0.001
270.0000*0.001
280.0000*0.001
290.0000*0.001
300.0000*0.001
310.0000*0.001
320.0000*0.001
330.0000*0.001
340.0000*0.001
350.0000*0.001
360.0000*0.001
370.0000*0.001
380.0000*0.001
390.0000*0.001
400.0000*0.001
 
];

v1_2 = v2_1; %v1從0掃到1
v2_2 = v1_1; % 從1掉到0


x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

plot_squar2(x1,y1,x2,y2);


% axis equal

%% plot rectangle (right)

x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

for i =0:100
    for j = 0:100
        save_angle(i+1,j+1) = line_angle(x1(i+1),y1(i+1),x2(j+1),y2(j+1));
        save_length(i+1,j+1) = line_length(x1(i+1),y1(i+1),x2(j+1),y2(j+1));
    end
end

cnt = 0;

for i =1:101
    for j = 1:101
        if(save_angle(i,j)>44.5 && save_angle(i,j)<45.5)
            list_x(cnt+1) = i;
            list_y(cnt+1) = j;
            cnt = cnt+1;
        end
    end
end

max = 0;
max_x =0;
max_y =0;

for i = 1:length(list_y)
    if(save_length(list_x(i),list_y(i))>max)
        max =save_length(list_x(i),list_y(i));
        max_x = list_x(i);
        max_y = list_y(i);
    end
end

% plot([record(location,1),record(location,3)],[record(location,2),record(location,4)],'g',LineWidth=3.0) %x1,y1 x2,y2
% 
% plot([record(location,1),record(location,1)],[record(location,2),record(location,4)],'g',LineWidth=3.0)
% plot([record(location,1),record(location,3)],[record(location,4),record(location,4)],'g',LineWidth=3.0)
% plot([record(location,3),record(location,3)],[record(location,2),record(location,4)],'g',LineWidth=3.0)
% plot([record(location,1),record(location,3)],[record(location,2),record(location,2)],'g',LineWidth=3.0)

% 
plot([x1(max_x),x2(max_y)],[y1(max_x),y2(max_y)],'g',LineWidth=3.0)

plot([x1(max_x),x1(max_x)],[y1(max_x),y2(max_y)],'g',LineWidth=3.0)
plot([x1(max_x),x2(max_y)],[y2(max_y),y2(max_y)],'g',LineWidth=3.0)
plot([x2(max_y),x2(max_y)],[y1(max_x),y2(max_y)],'g',LineWidth=3.0)
plot([x1(max_x),x2(max_y)],[y1(max_x),y1(max_x)],'g',LineWidth=3.0)

%% plot rectangle (left)

x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

for i =0:100
    for j = 0:100
        save_angle(i+1,j+1) = line_angle(x2(i+1),y2(i+1),x1(j+1),y1(j+1));
        save_length(i+1,j+1) = line_length(x2(i+1),y2(i+1),x1(j+1),y1(j+1));
    end
end

cnt = 0;

for i =1:101
    for j = 1:101
        if(save_angle(i,j)>44.5 && save_angle(i,j)<45.5)
            list_x(cnt+1) = i;
            list_y(cnt+1) = j;
            cnt = cnt+1;
        end
    end
end

max = 0;
max_x =0;
max_y =0;

for i = 1:length(list_y)
    if(save_length(list_x(i),list_y(i))>max)
        max =save_length(list_x(i),list_y(i));
        max_x = list_x(i);
        max_y = list_y(i);
    end
end

 
plot([x2(max_x),x1(max_y)],[y2(max_x),y1(max_y)],'g',LineWidth=3.0)

plot([x2(max_x),x2(max_x)],[y2(max_x),y1(max_y)],'g',LineWidth=3.0)
plot([x2(max_x),x1(max_y)],[y1(max_y),y1(max_y)],'g',LineWidth=3.0)
plot([x1(max_y),x1(max_y)],[y2(max_x),y1(max_y)],'g',LineWidth=3.0)
plot([x2(max_x),x1(max_y)],[y2(max_x),y2(max_x)],'g',LineWidth=3.0)

%% function test

x1 = v1_1; y1 = v1_2;
x2 = v2_1; y2 = v2_2;

plot_squar2(x1,y1,x2,y2);
